#!/bin/bash

# Update package lists
echo "Updating package lists..."
sudo apt update -y

# Upgrade installed packages
echo "Upgrading packages..."
sudo apt upgrade -y

# Install Cockpit
echo "Installing Cockpit..."
sudo apt install cockpit -y

# Enable and start Cockpit service
echo "Enabling and starting Cockpit service..."
sudo systemctl enable --now cockpit.socket

# Allow firewall (if ufw is active)
if sudo ufw status | grep -q "Status: active"; then
    echo "Allowing Cockpit through UFW firewall..."
    sudo ufw allow 9090/tcp
fi

# Print success message
echo "Cockpit installation complete!"
echo "You can access Cockpit at: https://$(hostname -I | awk '{print $1}'):9090"
